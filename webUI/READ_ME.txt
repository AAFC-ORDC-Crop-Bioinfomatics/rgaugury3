Web UI installation introduction

----------------------------------------------------------------------------------------------------------
Deploy website on Apache

Please do following configuration from Ubuntu console.

Step 1: Install Apahce and mod_wsgi, and allow in Firewall.

     ~$ sudo apt-get update
     ~$ sudo apt-get install apache2
     ~$ sudo apt-get install libapache2-mod-wsgi
    open "http://localhost:80", if the default apache page cannot be displayed, then execute command
    ~$ sudo ufw allow in "Apache Full"

Step 2: Copy and change permission

    Copy the webUI folder to /var/www/rgaugury/
    Change ownership for example "chown -R www-data:www-data rgaugury/"

Step 3: Configure the website

    1.Create 'rga.conf' file under '/etc/apache2/sites-available' sample content is as follows:
       <VirtualHost *:80>
        ServerName yourWebsiteURL
    
        WSGIDaemonProcess yourAppName user=UserName group=GroupName home=/var/www/rgaugury/webUI/
        WSGIScriptAlias / /var/www/rgaugury/webUI/rga.wsgi
    
        <Directory /var/www/rgaugury/webUI>
            WSGIProcessGroup yourAppName
            WSGIApplicationGroup %{GLOBAL}
            WSGIScriptReloading On
            Require all granted
        </Directory>
    
            ErrorLog ${APACHE_LOG_DIR}/error.log
            CustomLog ${APACHE_LOG_DIR}/access.log combined
    
       </VirtualHost>
    2.Enable the website
    
        ~$ a2ensite rga.conf
    
    3.In the 'webUI/config.py' file, change configures as follows:
    
        ENABLE_CACHE = True
        
        DEBUG = False 
        
        ENVIR = {
        'PATH' : '/home/quanx/app/jdk1.8.0_91/bin:'\
        '/home/quanx/app/ncbi-blast-2.3.0+/bin:'\
        '/home/quanx/app/hmmer-3.1b2-linux-intel-x86_64/binaries:'\
        '/home/quanx/app/PfamScan:'\
        '/home/quanx/app/interproscan-5.19-58.0:'\
        '/home/quanx/job/repo/rgaugury:'\
        '/home/quanx/job/repo/rgaugury/coils:'\
        '/home/quanx/app/cvit.1.2.1:'\
        '/home/quanx/app/phobius1.01:'\,
        
        'JAVA_HOME':'/home/quanx/app/jdk1.8.0_91',
        'PERL5LIB':'/home/quanx/app/PfamScan',
        'COILSDIR':'/home/quanx/job/repo/rgaugury/coils',
        'PFAMDB':'/home/quanx/pfamdb'
        }
        
        PIPELINE_HOME='/home/quanx/job/repo/rgaugury'
        
         #Change the path with yours.

Step 4: Restart the apache 'service apache2 restart'

    Essential software
    
    1 . install python2.7
    "~$sudo apt-get install python2.7"
    2 . install python-pip
    "~$sudo apt-get install python-pip"
    3 . install python-dev
    "~$sudo apt-get install python-dev" to install psutil
    4 . install modules
    "~$sudo pip install -r requirements.txt" (requirements.txt is under webUI folder)
    5 . install database
    "~$sudo apt-get install sqlite3"
    6 . initialize database
    "~$./initializeDB.py"

Stylus installation on Ubuntu

    css files are generated by "stylus". If you want to modify css, you should install stylus first, and compile the stylus file to generate the corresponding css file.
    ~$ sudo apt-get install npm
    ~$ sudo npm install stylus -g
    ~$ sudo ln -s /usr/bin/nodejs /usr/bin/node

Configuration

    cpu option can be displayed by setting cpu_toggle as 1 in configuration file.
    
    By default, the Flask internal server port is 7000. It can be changed in config.py file. If you deployed the website on Apache then the default port is 80.